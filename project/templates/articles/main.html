{%extends 'articles/default.html'%}
{% load static %}


{%block content%}
<div class="wraper">
    <nav class="category-navigator navigator">
        <ul class="category-navigator__menu menu">
            <li class="menu__item"><a href="#" class="menu__link">Танки</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Хилы</a></li>
            <li class="menu__item"><a href="#" class="menu__link">ДД</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Торговцы</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Гилдмастеры</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Квестгиверы</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Кузнецы</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Зельевары</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Кожевники</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Мастера заклинаний</a></li>
            <li class="menu__item"><a href="#" class="menu__link">Все</a></li>
        </ul>
    </nav>
    {%if articles%}
    {%for article in articles%}
    <div class="post">
        <a class="post__title" href="article/{{article.id}}">{{article.title}}</a>
        <img src="{{article.preview.url}}" alt="" class="post__main-img">
        <p class="post__short-description">{{article.shortDescription}}</p>
        <div class="post__statistics">
            <p class="post__date">{{article.create_at}} </p>
            <div class="post__ER">
                <div class="post__like">
                    <img src="{% static 'articles/icons/like.svg'%}" alt="" class="like-icon">
                    <p class="like-count">{{article.rating}}</p>
                </div>
                <div class="post__comment">
                    <img src="{% static 'articles/icons/comment.svg'%}" alt="" class="comment-icon">
                    <p class="comment-count">{{article.comments}}</p>
                </div>
            </div>
        </div>
    </div>
    {%endfor%}
    {%endif%}
    <!-- Проверяем что поддерживается постраничный вывод -->
    {% if is_paginated %}
    <div class="paginate">
        <!-- Если доступна предыдущая страница, то даём ссылку на неё и самую первую страницу -->
        {% if page_obj.has_previous %}
        <a class="paginate-link" href="?page=1">First</a>
        <a class="paginate-link" href="?page={{ page_obj.previous_page_number }}">
            <<< </a>
                {% endif %}

                <!-- Показываем только текущую страницу и ближайшие к ней, чтобы список не тянулся и не захламлял страницу -->
                {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                <a class="paginate-link">{{ num }}</a>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} <a class="paginate-link"
                    href="?page={{ num }}">
                    {{num}}
        </a>
        {% endif %}
        {% endfor %}

        <!-- Если есть следующая страница, то даём ссылку на неё и на самую последнюю страницу -->
        {% if page_obj.has_next %}
        <a class="paginate-link" href="?page={{ page_obj.next_page_number }}">>>></a>
        <a class="paginate-link" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
        {% endif %}
    </div>
    {% endif %}

</div>
{%endblock content%}